<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KriÅ¾iÄ‡-KruÅ¾iÄ‡</title>
<style>
  body { font-family: sans-serif; text-align: center; margin-top: 50px; }
  #ploca { display: grid; grid-template-columns: repeat(3, 100px); gap: 5px; justify-content: center; }
  .polje { width: 100px; height: 100px; font-size: 50px; display: flex; align-items: center; justify-content: center; background: #f0f0f0; cursor: pointer; border-radius: 8px; }
  .polje:hover { background: #ddd; }
  button { margin-top: 20px; padding: 8px 20px; font-size: 16px; }
</style>
</head>
<body>
  <h1>KriÅ¾iÄ‡-KruÅ¾iÄ‡</h1>
  <div id="ploca"></div>
  <p id="status"></p>
  <button onclick="reset()">Nova igra</button>

<script>
const plocaEl = document.getElementById("ploca");
const statusEl = document.getElementById("status");

function crtaj(ploca) {
  plocaEl.innerHTML = "";
  ploca.forEach((red, i) => {
    red.forEach((znak, j) => {
      const div = document.createElement("div");
      div.className = "polje";
      div.textContent = znak;
      div.onclick = () => odigraj(i, j);
      plocaEl.appendChild(div);
    });
  });
}

async function odigraj(r, s) {
  const res = await fetch("/potez", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ r, s })
  });
  const data = await res.json();
  crtaj(data.ploca);
  if (data.rezultat) {
    if (data.rezultat === "pobjeda") statusEl.textContent = "ğŸ‰ Pobijedio si!";
    else if (data.rezultat === "poraz") statusEl.textContent = "ğŸ’» RaÄunalo je pobijedilo.";
    else statusEl.textContent = "ğŸ¤ NerijeÅ¡eno!";
  }
}

async function reset() {
  const res = await fetch("/reset", { method: "POST" });
  const data = await res.json();
  statusEl.textContent = "";
  crtaj(data.ploca);
}

reset();
</script>
</body>
</html>
